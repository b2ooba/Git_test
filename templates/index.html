<!-- templates/index.html -->

<!-- Formulaire d'inscription -->
<form id="registration-form" action="/register" method="post">
  <h2>Inscription</h2>
  <label for="reg-username">Nom d'utilisateur:</label>
  <input type="text" id="reg-username" name="username" required>
  <label for="reg-password">Mot de passe:</label>
  <input type="password" id="reg-password" name="password" required>
  <button type="submit">S'inscrire</button>
</form>

<!-- Formulaire de connexion -->
<form id="login-form" action="/login" method="post">
  <h2>Connexion</h2>
  <label for="login-username">Nom d'utilisateur:</label>
  <input type="text" id="login-username" name="username" required>
  <label for="login-password">Mot de passe:</label>
  <input type="password" id="login-password" name="password" required>
  <button type="submit">Se connecter</button>
</form>

<!-- Affichage des messages -->
<ul id="messages"></ul>

<!-- Formulaire d'envoi de messages -->
<form id="form" action="">
  <input id="message" autocomplete="off" /><button>Envoyer</button>
</form>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
  var socket = io.connect('http://' + document.domain + ':' + location.port);

  // Ã‰coutez les messages du serveur
  socket.on('message', function(msg){
    $('#messages').append($('<li>').text(msg));
  });

  // Envoyez un message au serveur lorsque le formulaire est soumis
  $('#form').submit(function(e){
    e.preventDefault();
    socket.emit('message', $('#message').val());
    $('#message').val('');
    return false;
  });
</script>
